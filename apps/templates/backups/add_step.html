{% extends "layouts/base.html" %}
{% load humanize %}
{% block title %} Inicio {% endblock %} 

<!-- Specific Page CSS goes HERE  -->
{% block stylesheets %}{% endblock stylesheets %}

{% block content %}
{% load static%}

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script type='text/javascript' src="{% static 'jquery-3.6.0.min.js' %}"></script>
    <script type='text/javascript' src="{% static 'jquery.formset.js' %}"></script>


    <h2>Rotacion</h2>
    <form id="form-container" method="POST">
        {% csrf_token %}
        <div class="table-responsive">
        <table class="table  table-sm table-centered table-nowrap mb-0 rounded hover">
        <thead class="thead-dark">  
            <tr>
                <th class="border-0 rounded-start">#</th>
                <th class="border-0">Descripcion</th>
                <th class="border-0">Estatus</th>
                <th class="border-0">Ubicación</th>
                <th class="border-0">Retención</th>
                <th class="border-0">Formato</th>
                <th class="border-0 rounded-end">Actions</th>
            </tr>
        </thead>      
            
            {{step_formset.management_form}}
            {% for form in step_formset %}
                <tr class="formset_row">
                    {% for field in form.visible_fields %}
                   
                        {# Include the hidden fields in the form #}
                        {{ field.errors.as_ul }}
                        <td >
                            {{ field }}
                        </td>
                    {% endfor %}
                    
                </tr>
            {% endfor %}

        <tr><td><button id='submit' class='button btn-primary' type="submit">Guardar Cambios</button>
        </td></tr>
            </TABLE>
        </div>


        {% if form %}
        {% if form.errors %}
             {% for field in form %}
                  {{field.errors}}
             {% endfor %}
        {% endif %}
        {% for field in form %}
             <li>{{ field.label_tag }}: {{ field }}</li>
        {% endfor %}
    {% endif %}
    </form>






{% endblock content %}

<!-- Specific Page JS goes HERE  -->
{% block javascripts %}

<script type="text/javascript">
    $('.formset_row').formset({
        addText: 'Nuevo',
        deleteText: 'Eliminar',
        prefix: 'familymember_set',
        addCssClass:'btn btn-sm btn-secondary',
        //deleteCssClass:'btn btn-secondary'
    });
</script>
{% endblock javascripts %}
